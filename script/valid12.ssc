%SCRIPT VALID12
%% Ensures that we have at least a minimum valid LIST12
 
{S * Ensuring that refinement directives exist and are valid.
%%
%  VARIABLE LOGICAL L12SMASK
%  VARIABLE INTEGER L12SER
%%
%  BLOCK
%    ON ERROR TERMINATE
%    COPY '#LIST 22'
%    COPY 'END'
%% 

{R  CRYSTALS has valid refinement directives  (LIST 12)
%% 
%    COPY '#PRINT 12'
%    COPY 'END'
{R  Remember that 'valid' does not necessarily mean 'suitable'!

%    FINISH
%  END BLOCK

{E  CRYSTALS DOES NOT have valid refinement directives (LIST 12)
{S  * Backing up existing refinement directives. (LIST 12)
%  COPY '#RELEASE PUNCH bad12.pch'
%  COPY '#PUNCH 12'
%  COPY 'END'
%  COPY '#RELEASE PUNCH bfile.pch'
{I  Bad refinement directives saved to: {&bad12.pch{&

{S  * Creating a minimum valid refinement list.
%  COPY '#LIST 12'
%  COPY 'FULL'
%  COPY 'END'
%  COPY '#PRINT 12'
%  COPY 'END'
{R  This 'valid' list may not be suitable for refinement, but
{R  will be fine for Fourier and calculation of scale and R-factor.
%  COPY '#GENERALEDIT 12'
%  COPY 'GETSERIAL L12SER'
%  COPY 'END'
%  EVALUATE L12SMASK = TRUE
%  COPY '#SCRIPT XPUTINFO'
%END SCRIPT
 
